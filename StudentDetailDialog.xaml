<ContentDialog
    x:Class="ClassScoreApp_WinUI3.StudentDetailDialog"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:ClassScoreApp_WinUI3"
    Title="积分评价详情"
    PrimaryButtonText="关闭"
    DefaultButton="Primary">

    <!-- 弹窗的主体容器 -->
    <Grid Width="500" Height="350">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"/>
            <!-- 上方：信息展示 -->
            <RowDefinition Height="Auto"/>
            <!-- 下方：操作区域 -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="180"/>
            <!-- 左侧：姓名分数 -->
            <ColumnDefinition Width="*"/>
            <!-- 右侧：历史记录 -->
        </Grid.ColumnDefinitions>

        <!-- 左侧：人名和当前分数 -->
        <StackPanel Grid.Column="0" VerticalAlignment="Center" Spacing="10">
            <TextBlock Text="{x:Bind CurrentStudent.Name}" 
                       FontSize="24" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="{x:Bind CurrentStudent.Score, Mode=OneWay}" 
                       FontSize="56" Foreground="Red" FontWeight="Bold" HorizontalAlignment="Center"/>
            <TextBlock Text="当前积分" FontSize="12" Opacity="0.6" HorizontalAlignment="Center"/>
        </StackPanel>

        <!-- 右侧：加扣分历史 (用 ListView) -->
        <Grid Grid.Column="1" Margin="20,0,0,0">
            <TextBlock Text="评价历史记录" Style="{StaticResource CaptionTextBlockStyle}" Margin="0,0,0,10"/>
            <ListView ItemsSource="{x:Bind CurrentStudent.History}" 
                      Margin="0,25,0,0" 
                      Background="{ThemeResource LayerFillColorDefaultBrush}"
                      CornerRadius="8" Padding="5"/>
        </Grid>

        <!-- 底部：输入和加减分按钮 -->
        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" 
                    Orientation="Horizontal" 
                    HorizontalAlignment="Right" 
                    Spacing="8" Margin="0,20,0,0">

            <!-- 数字输入框 -->
            <NumberBox x:Name="ScoreInput" Value="1" Width="250" 
                       Minimum="1"
                       SpinButtonPlacementMode="Inline"
                       Header="分值"/>

            <Button Content="加分" Click="AddBtn_Click" 
                    Style="{StaticResource AccentButtonStyle}" VerticalAlignment="Bottom"/>

            <Button Content="扣分" Click="SubBtn_Click" 
                    VerticalAlignment="Bottom"/>
        </StackPanel>
    </Grid>
</ContentDialog>